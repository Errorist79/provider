# ============================================================================
# RPC Provider Gateway - Environment Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control!

# ============================================================================
# Kong Gateway Configuration
# ============================================================================
KONG_VERSION=3.6
KONG_DB_USER=kong
KONG_DB_PASSWORD=kong_secure_password_change_me
KONG_DB_NAME=kong

# Kong Ports
KONG_PROXY_PORT=8000
KONG_ADMIN_PORT=8001
KONG_MANAGER_PORT=8002
KONG_STATUS_PORT=8100
KONG_PROXY_SSL_PORT=8443
KONG_ADMIN_SSL_PORT=8444

# Kong Manager Session Secret (change in production!)
KONG_ADMIN_SESSION_SECRET=change_this_secret_in_production

# OpenTelemetry / Tracing
KONG_TRACING_RATE=1.0

# ============================================================================
# Application Database (PostgreSQL)
# ============================================================================
POSTGRES_VERSION=15
APP_DB_USER=rpcuser
APP_DB_PASSWORD=secure_password_change_me
APP_DB_NAME=rpc_gateway
APP_DB_PORT=5432

# ============================================================================
# Redis Cache
# ============================================================================
REDIS_VERSION=7-alpine
REDIS_PASSWORD=redis_password_change_me
REDIS_PORT=6379

# Cache TTL settings (seconds)
UNKEY_VERIFY_CACHE_TTL=60
RATE_LIMIT_CACHE_TTL=30

# ============================================================================
# ClickHouse (Telemetry & Analytics)
# ============================================================================
CLICKHOUSE_VERSION=23.8-alpine
CLICKHOUSE_DB=telemetry
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=clickhouse_password_change_me
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000

# Data retention policies (days)
CLICKHOUSE_RAW_RETENTION_DAYS=14
CLICKHOUSE_HOURLY_RETENTION_DAYS=90
CLICKHOUSE_DAILY_RETENTION_DAYS=540

# ============================================================================
# Monitoring (Prometheus & Grafana)
# ============================================================================
PROMETHEUS_VERSION=latest
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=30d

GRAFANA_VERSION=latest
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_password_change_me
GRAFANA_PLUGINS=grafana-clickhouse-datasource

# ============================================================================
# Unkey (API Key Management)
# https://github.com/unkeyed/unkey
# ============================================================================
UNKEY_VERSION=v2.0.28
UNKEY_PORT=3001
UNKEY_BASE_URL=http://localhost:3001
UNKEY_API_URL=http://unkey:8080
UNKEY_ROOT_KEY=unkey_root_change_me_in_production

# Unkey workspace configuration (auto-populated by setup script)
UNKEY_WORKSPACE_ID=
UNKEY_API_ID=

# Verification configuration
UNKEY_VERIFY_URL=http://unkey:8080/api/v1/keys.verifyKey
UNKEY_CACHE_TTL=60

# ============================================================================
# SigNoz (APM)
# ============================================================================
SIGNOZ_VERSION=0.38.0
SIGNOZ_PORT=3301
SIGNOZ_OTEL_COLLECTOR_ENDPOINT=http://otel-collector:4317
SIGNOZ_OTEL_HTTP_ENDPOINT=http://otel-collector:4318

# ============================================================================
# Rate Limiting Defaults
# ============================================================================
# These are plan-based and will be overridden by plan configuration
RATE_LIMIT_FREE_PER_MINUTE=100
RATE_LIMIT_BASIC_PER_MINUTE=1000
RATE_LIMIT_PRO_PER_MINUTE=10000
RATE_LIMIT_ENTERPRISE_PER_MINUTE=100000

# Burst multiplier (e.g., 2 = allow 2x rate for short bursts)
RATE_LIMIT_BURST_MULTIPLIER=2

# ============================================================================
# Security Configuration
# ============================================================================
# Secrets encryption (for future Vault integration)
VAULT_ENABLED=false
VAULT_ADDR=http://vault:8200
VAULT_TOKEN=vault_token_change_me

# HTTPS/TLS
TLS_ENABLED=false
TLS_CERT_PATH=/etc/certs/server.crt
TLS_KEY_PATH=/etc/certs/server.key

# CORS Configuration
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,apikey
CORS_MAX_AGE=3600

# ============================================================================
# Application Configuration
# ============================================================================
# Environment: development, staging, production
ENVIRONMENT=development

# Log Level: debug, info, warn, error
LOG_LEVEL=info

# API Base URL
API_BASE_URL=http://localhost:8000

# Customer Portal URL (for future implementation)
PORTAL_URL=http://localhost:4000

# ============================================================================
# Reporting API (Usage Analytics & Metrics)
# ============================================================================
REPORTING_API_PORT=4000
REPORTING_API_AUTH_ENABLED=false
REPORTING_API_ADMIN_KEY=change_me_in_production

# Note: Full billing system to be implemented later (see docs/BILLING.md)

# ============================================================================
# Upstream RPC Nodes Configuration
# ============================================================================
# These will be configured via Kong Admin API or declarative config
# Example format:
# UPSTREAM_NODE_1=149.50.96.191:8545
# UPSTREAM_NODE_2=57.129.18.215:8545
